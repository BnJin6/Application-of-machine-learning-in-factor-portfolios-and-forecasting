2025-11-07 09:05:02 - stock_prediction - INFO - ================================================================================
2025-11-07 09:05:02 - stock_prediction - INFO - 股票预测项目 - Alpha101因子量化预测
2025-11-07 09:05:02 - stock_prediction - INFO - ================================================================================
2025-11-07 09:05:02 - stock_prediction - INFO - 开始时间: 2025-11-07 09:05:02
2025-11-07 09:05:02 - stock_prediction - INFO - 运行配置:
2025-11-07 09:05:02 - stock_prediction - INFO -   数据文件: daily_data.csv
2025-11-07 09:05:02 - stock_prediction - INFO -   训练集截止日期: 2019-12-31
2025-11-07 09:05:02 - stock_prediction - INFO -   测试集起始日期: 2020-01-01
2025-11-07 09:05:02 - stock_prediction - INFO -   Alpha因子数量: 50
2025-11-07 09:05:02 - stock_prediction - INFO -   模型类型: ['LightGBM', 'XGBoost']
2025-11-07 09:05:02 - stock_prediction - INFO -   特征选择数量: 50
2025-11-07 09:05:02 - stock_prediction - INFO - --------------------------------------------------------------------------------
2025-11-07 09:05:02 - stock_prediction - INFO - 【步骤1】数据加载与预处理
2025-11-07 09:05:02 - stock_prediction - INFO - --------------------------------------------------------------------------------
2025-11-07 09:05:05 - stock_prediction - INFO - 原始数据 信息:
2025-11-07 09:05:05 - stock_prediction - INFO -   形状: (953712, 17)
2025-11-07 09:05:05 - stock_prediction - INFO -   列数: 17
2025-11-07 09:05:05 - stock_prediction - INFO -   行数: 953712
2025-11-07 09:05:05 - stock_prediction - INFO -   内存使用: 680.79 MB
2025-11-07 09:05:06 - stock_prediction - INFO - 预处理后数据 信息:
2025-11-07 09:05:06 - stock_prediction - INFO -   形状: (953692, 19)
2025-11-07 09:05:06 - stock_prediction - INFO -   列数: 19
2025-11-07 09:05:06 - stock_prediction - INFO -   行数: 953692
2025-11-07 09:05:06 - stock_prediction - INFO -   内存使用: 193.73 MB
2025-11-07 09:05:06 - stock_prediction - INFO - 训练集样本数: 547698
2025-11-07 09:05:06 - stock_prediction - INFO - 测试集样本数: 405626
2025-11-07 09:05:06 - stock_prediction - INFO - 训练集股票数: 659
2025-11-07 09:05:06 - stock_prediction - INFO - 测试集股票数: 524
2025-11-07 09:05:06 - stock_prediction - INFO - --------------------------------------------------------------------------------
2025-11-07 09:05:06 - stock_prediction - INFO - 【步骤2】特征工程
2025-11-07 09:05:06 - stock_prediction - INFO - --------------------------------------------------------------------------------
2025-11-07 09:05:06 - stock_prediction - INFO - 开始生成训练集特征...
2025-11-07 09:05:06 - stock_prediction - INFO - 计算Alpha因子: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 49, 50, 101]
2025-11-07 09:07:30 - stock_prediction - INFO - 训练集特征 信息:
2025-11-07 09:07:30 - stock_prediction - INFO -   形状: (547698, 86)
2025-11-07 09:07:30 - stock_prediction - INFO -   列数: 86
2025-11-07 09:07:30 - stock_prediction - INFO -   行数: 547698
2025-11-07 09:07:30 - stock_prediction - INFO -   内存使用: 395.40 MB
2025-11-07 09:07:30 - stock_prediction - INFO - 开始生成测试集特征...
2025-11-07 09:09:09 - stock_prediction - INFO - 测试集特征 信息:
2025-11-07 09:09:09 - stock_prediction - INFO -   形状: (405626, 86)
2025-11-07 09:09:09 - stock_prediction - INFO -   列数: 86
2025-11-07 09:09:09 - stock_prediction - INFO -   行数: 405626
2025-11-07 09:09:09 - stock_prediction - INFO -   内存使用: 292.84 MB
2025-11-07 09:09:09 - stock_prediction - INFO - --------------------------------------------------------------------------------
2025-11-07 09:09:09 - stock_prediction - INFO - 【步骤3】特征选择
2025-11-07 09:09:09 - stock_prediction - INFO - --------------------------------------------------------------------------------
2025-11-07 09:09:10 - stock_prediction - INFO - 移除y=0样本后，训练集样本数: 547698
2025-11-07 09:09:10 - stock_prediction - INFO - 初始特征数量: 74
2025-11-07 09:09:10 - stock_prediction - INFO - 移除高缺失率特征后，剩余 74 个特征
2025-11-07 09:09:12 - stock_prediction - INFO - 训练集大小: (547698, 74)
2025-11-07 09:09:12 - stock_prediction - INFO - 目标变量统计: 均值=-0.000059, 标准差=0.020448
2025-11-07 09:09:12 - stock_prediction - INFO - 开始特征选择...
2025-11-07 09:09:12 - stock_prediction - INFO - 移除低方差特征后: 69 个特征
2025-11-07 09:09:15 - stock_prediction - INFO - 移除高相关性特征后: 60 个特征
2025-11-07 09:09:16 - stock_prediction - INFO - 最终选择 45 个特征用于建模
2025-11-07 09:09:16 - stock_prediction - INFO - Top 10特征: ['alpha005', 'momentum_5', 'alpha011', 'alpha038', 'momentum_20', 'alpha047', 'momentum_10', 'alpha004', 'alpha013', 'alpha026']
2025-11-07 09:09:16 - stock_prediction - INFO - 
Top 5 特征相关性:
2025-11-07 09:09:16 - stock_prediction - INFO -   alpha005: 0.026651
2025-11-07 09:09:16 - stock_prediction - INFO -   momentum_5: 0.020935
2025-11-07 09:09:16 - stock_prediction - INFO -   alpha011: 0.019384
2025-11-07 09:09:16 - stock_prediction - INFO -   alpha038: 0.018341
2025-11-07 09:09:16 - stock_prediction - INFO -   momentum_20: 0.017680
2025-11-07 09:09:16 - stock_prediction - INFO - --------------------------------------------------------------------------------
2025-11-07 09:09:16 - stock_prediction - INFO - 【步骤4】模型训练
2025-11-07 09:09:16 - stock_prediction - INFO - --------------------------------------------------------------------------------
2025-11-07 09:09:16 - stock_prediction - INFO - 训练集: (465543, 45), 验证集: (82155, 45)
2025-11-07 09:09:16 - stock_prediction - INFO - 训练集目标变量统计: 均值=-0.000080, 标准差=0.020141
2025-11-07 09:09:16 - stock_prediction - INFO - 验证集目标变量统计: 均值=0.000061, 标准差=0.022109
2025-11-07 09:09:16 - stock_prediction - INFO - ========================================
2025-11-07 09:09:16 - stock_prediction - INFO - 训练LightGBM模型...
2025-11-07 09:09:16 - stock_prediction - INFO - ========================================
2025-11-07 09:09:21 - stock_prediction - INFO - 
LightGBM验证集评估:
2025-11-07 09:09:21 - stock_prediction - INFO - LightGBM性能指标:
2025-11-07 09:09:21 - stock_prediction - INFO -   MSE: 0.00048619368150497496
2025-11-07 09:09:21 - stock_prediction - INFO -   RMSE: 0.02204980003321969
2025-11-07 09:09:21 - stock_prediction - INFO -   MAE: 0.014523719577081358
2025-11-07 09:09:21 - stock_prediction - INFO -   Correlation: 0.07388930108968261
2025-11-07 09:09:21 - stock_prediction - INFO - 
LightGBM Top 10特征重要性:
2025-11-07 09:09:21 - stock_prediction - INFO -   momentum_20: 450.0000
2025-11-07 09:09:21 - stock_prediction - INFO -   momentum_5: 438.0000
2025-11-07 09:09:21 - stock_prediction - INFO -   momentum_10: 426.0000
2025-11-07 09:09:21 - stock_prediction - INFO -   turnover_rate_rank: 385.0000
2025-11-07 09:09:21 - stock_prediction - INFO -   alpha101: 381.0000
2025-11-07 09:09:21 - stock_prediction - INFO -   alpha009: 380.0000
2025-11-07 09:09:21 - stock_prediction - INFO -   alpha041: 374.0000
2025-11-07 09:09:21 - stock_prediction - INFO -   market_cap_rank: 327.0000
2025-11-07 09:09:21 - stock_prediction - INFO -   alpha042: 318.0000
2025-11-07 09:09:21 - stock_prediction - INFO -   alpha011: 310.0000
2025-11-07 09:09:21 - stock_prediction - INFO - 
========================================
2025-11-07 09:09:21 - stock_prediction - INFO - 训练XGBoost模型...
2025-11-07 09:09:21 - stock_prediction - INFO - ========================================
2025-11-07 09:09:23 - stock_prediction - INFO - 
XGBoost验证集评估:
2025-11-07 09:09:23 - stock_prediction - INFO - XGBoost性能指标:
2025-11-07 09:09:23 - stock_prediction - INFO -   MSE: 0.0004887023601637111
2025-11-07 09:09:23 - stock_prediction - INFO -   RMSE: 0.022106613493787577
2025-11-07 09:09:23 - stock_prediction - INFO -   MAE: 0.014568271622084981
2025-11-07 09:09:23 - stock_prediction - INFO -   Correlation: 0.03524900828090721
2025-11-07 09:09:23 - stock_prediction - INFO - 
XGBoost Top 10特征重要性:
2025-11-07 09:09:23 - stock_prediction - INFO -   momentum_5: 1.0000
2025-11-07 09:09:23 - stock_prediction - INFO -   alpha003: 0.0000
2025-11-07 09:09:23 - stock_prediction - INFO -   turnover_rate_rank: 0.0000
2025-11-07 09:09:23 - stock_prediction - INFO -   alpha024: 0.0000
2025-11-07 09:09:23 - stock_prediction - INFO -   alpha050: 0.0000
2025-11-07 09:09:23 - stock_prediction - INFO -   alpha041: 0.0000
2025-11-07 09:09:23 - stock_prediction - INFO -   alpha010: 0.0000
2025-11-07 09:09:23 - stock_prediction - INFO -   alpha046: 0.0000
2025-11-07 09:09:23 - stock_prediction - INFO -   alpha014: 0.0000
2025-11-07 09:09:23 - stock_prediction - INFO -   alpha006: 0.0000
2025-11-07 09:09:23 - stock_prediction - INFO - --------------------------------------------------------------------------------
2025-11-07 09:09:23 - stock_prediction - INFO - 【步骤5】模型集成
2025-11-07 09:09:23 - stock_prediction - INFO - --------------------------------------------------------------------------------
2025-11-07 09:09:23 - stock_prediction - INFO - 已添加2个模型到集成器
2025-11-07 09:09:23 - stock_prediction - INFO - 
集成模型验证集评估:
2025-11-07 09:09:23 - stock_prediction - INFO - 集成模型性能指标:
2025-11-07 09:09:23 - stock_prediction - INFO -   MSE: 0.0004866587448214925
2025-11-07 09:09:23 - stock_prediction - INFO -   RMSE: 0.02206034326164243
2025-11-07 09:09:23 - stock_prediction - INFO -   MAE: 0.014532930122068457
2025-11-07 09:09:23 - stock_prediction - INFO -   Correlation: 0.07419656704431862
2025-11-07 09:09:23 - stock_prediction - INFO - --------------------------------------------------------------------------------
2025-11-07 09:09:23 - stock_prediction - INFO - 【步骤6】测试集预测
2025-11-07 09:09:23 - stock_prediction - INFO - --------------------------------------------------------------------------------
2025-11-07 09:09:25 - stock_prediction - INFO - 测试集大小: (405626, 45)
2025-11-07 09:09:25 - stock_prediction - INFO - 测试集日期范围: 2020-01-02 15:00:00 至 2023-11-15 15:00:00
2025-11-07 09:09:25 - stock_prediction - INFO - 开始预测...
2025-11-07 09:09:26 - stock_prediction - INFO - 预测值统计: 均值=-0.000095, 标准差=0.000828
2025-11-07 09:09:26 - stock_prediction - INFO - 预测值范围: [-0.019714, 0.016320]
2025-11-07 09:09:26 - stock_prediction - INFO - 预测结果已保存到: predictions.csv
2025-11-07 09:09:26 - stock_prediction - INFO - 预测样本数: 405626
2025-11-07 09:09:26 - stock_prediction - INFO - 预测结果统计:
2025-11-07 09:09:26 - stock_prediction - INFO -   预测样本数: 405626
2025-11-07 09:09:26 - stock_prediction - INFO -   预测股票数: 524
2025-11-07 09:09:26 - stock_prediction - INFO -   预测日期数: 938
2025-11-07 09:09:26 - stock_prediction - INFO -   预测值均值: -9.471468755860199e-05
2025-11-07 09:09:26 - stock_prediction - INFO -   预测值标准差: 0.0008282853456821087
2025-11-07 09:09:26 - stock_prediction - INFO -   预测值最小值: -0.019713873162112434
2025-11-07 09:09:26 - stock_prediction - INFO -   预测值最大值: 0.016319736006332526
2025-11-07 09:09:26 - stock_prediction - INFO - --------------------------------------------------------------------------------
2025-11-07 09:09:26 - stock_prediction - INFO - 【步骤7】保存模型
2025-11-07 09:09:26 - stock_prediction - INFO - --------------------------------------------------------------------------------
2025-11-07 09:09:26 - stock_prediction - INFO - LightGBM模型已保存到: models/lgb_model.pkl
2025-11-07 09:09:26 - stock_prediction - INFO - XGBoost模型已保存到: models/xgb_model.pkl
2025-11-07 09:09:26 - stock_prediction - INFO - 特征列表已保存到: models/feature_list.pkl
2025-11-07 09:09:26 - stock_prediction - INFO - 运行摘要已保存到: logs/run_summary.json
2025-11-07 09:09:26 - stock_prediction - INFO - ================================================================================
2025-11-07 09:09:26 - stock_prediction - INFO - 【步骤8】结果总结
2025-11-07 09:09:26 - stock_prediction - INFO - ================================================================================
2025-11-07 09:09:26 - stock_prediction - INFO - 
模型性能对比:
2025-11-07 09:09:26 - stock_prediction - INFO -   LightGBM Correlation: 0.073889
2025-11-07 09:09:26 - stock_prediction - INFO -   XGBoost Correlation: 0.035249
2025-11-07 09:09:26 - stock_prediction - INFO -   Ensemble Correlation: 0.074197
2025-11-07 09:09:26 - stock_prediction - INFO - 
最佳模型: Ensemble
2025-11-07 09:09:26 - stock_prediction - INFO - 
结束时间: 2025-11-07 09:09:26
2025-11-07 09:09:26 - stock_prediction - INFO - ================================================================================
2025-11-07 09:09:26 - stock_prediction - INFO - 项目完成!
2025-11-07 09:09:26 - stock_prediction - INFO - ================================================================================
2025-11-07 09:09:26 - stock_prediction - INFO - 
详细日志已保存到: logs/stock_prediction_20251107_090502.log
